<!DOCTYPE html>
<html>
<head>
  <title>ChatGPT Memory Bank</title>
  <style>
    body { font-family: sans-serif; width: 400px; padding: 10px; font-size: 14px; }
    h3 { margin-top: 15px; margin-bottom: 5px; }
    button { padding: 8px; margin-bottom: 10px; cursor: pointer; }
    #generate-buttons button { width: 100%; }

    #memory-list { max-height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 5px; }
    .memory-item { padding: 8px; border-bottom: 1px solid #eee; }
    .memory-title { font-weight: bold; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
    .memory-title:hover { background-color: #f0f0f0; }
    .memory-info { display: none; margin-top: 8px; padding: 8px; background-color: #f9f9f9; border-radius: 4px; }
    .memory-item.expanded .memory-info { display: block; }
    
    /* --- THE FIX IS HERE --- */
    /* This new rule targets the <pre> tag directly to enforce text wrapping. */
    .memory-info pre {
      white-space: pre-wrap;   /* Allows text to wrap to the next line */
      overflow-wrap: break-word; /* Breaks long words that would otherwise overflow */
      font-size: 13px;         /* Keeps font consistent with edit textarea */
      margin: 0;               /* Resets default <pre> tag margins */
    }
    /* --- END FIX --- */

    .memory-actions { margin-top: 8px; text-align: right; }
    .memory-actions button { font-size: 12px; padding: 4px 8px; margin-left: 5px; }

    .edit-textarea { width: 98%; min-height: 80px; margin-top: 5px; font-family: inherit; font-size: 13px; }
  </style>
</head>
<body>
  <h3>Saved Memories</h3>
  <div id="memory-list">
    <!-- Memories will be loaded here by JavaScript -->
  </div>
  <button id="remindBtn" style="width: 100%; margin-top: 10px;">Remind ChatGPT of Selected</button>
  <h3>Generate Memory</h3>
  <div style="margin-bottom: 8px;">
    <input id="customInstruction" type="text" placeholder="Enter specific instruction (optional)" style="width: 100%; padding: 6px; font-size: 13px;" />
  </div>
  <div id="generate-buttons" style="display: flex; flex-direction: row; justify-content: space-between; margin-bottom: 5px;">
    <button id="saveLastBtn" style="flex: 1; margin-right: 5px;">Save Last Exchange</button>
    <button id="saveChatBtn" style="flex: 1; margin-right: 5px;">Save Whole Chat</button>
  </div>
  <script src="popup.js"></script>
</body>
</html>